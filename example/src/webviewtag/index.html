<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>webview tag test</title>
    <script src="views://webviewtag/index.js"></script>
</head>
<body style="height: 100vh; padding-top: 20px;"
ondragover="console.log(event);document.getElementById('draginfo').innerHTML = 'clientX: '+event.clientX+' | clientY: '+event.clientY;">    
    <div class="electrobun-webkit-app-region-drag" style=" cursor:move; -webkit-user-select: none; position:absolute; top: 0; right: 0; left: 80px; background: #222; padding: 3px 10px; color: #eee;">draggable area: move the window by adding .electrobun-webkit-app-region-drag class to any html element</div>
    <h1>Webview Tag Test</h1>
    <button onclick="document.querySelector('electrobun-webview').goBack()">Go Back</button>
    <button onclick="document.querySelector('electrobun-webview').goForward()">Go Forward</button>
    <button onclick="document.querySelector('electrobun-webview').reload()">Reload</button>
    <button onclick="document.querySelector('electrobun-webview').setAttribute('src', 'https://eggbun.sh')">eggbun.sh</button>
    <button onclick="document.querySelector('electrobun-webview').setAttribute('src', 'https://github.com/blackboardsh/electrobun')">github.com/blackboardsh/electrobun</button>
    <button onclick="document.querySelector('electrobun-webview').syncScreenshot()">Sync Screenshot</button>
    <button onclick="document.querySelector('electrobun-webview').toggleTransparent()">Toggle Transparent</button>
    <button onclick="document.querySelector('electrobun-webview').togglePassthrough()">Toggle Passthrough</button>
    <button onclick="document.querySelector('electrobun-webview').toggleHidden()">hide webview</button>
    <button onclick="document.querySelector('electrobun-webview').toggleDelegateMode()">Toggle delegate mode</button>
    
    <electrobun-webview  src="https://electrobun.dev" preload="" ></electrobun-webview>    
    <electrobun-webview preload="window.onload = () => {document.body.innerHTML += 'hello from preload';}"  html="<html><body><h1>webview tag with html</h1></body></html>" ></electrobun-webview>    
    <h2>Test loading a bundled png via views:// scheme</h2>
    <img src="views://webviewtag/electrobun.png" />

    
    <div draggable="true" style="padding: 10px; width:100px;height:100px;border:5px solid black; cursor:move;">drag me into the webview when delegate mode is enabled</div>
    <span id="draginfo"></span>

    <script>
        document.querySelector('electrobun-webview').on('did-navigate', () => {
            console.log('did-navigate');
        });

        document.querySelector('electrobun-webview').on('did-navigate-in-page', () => {
            console.log('did-navigate-in-page');
        });

        document.querySelector('electrobun-webview').on('did-commit-navigation', () => {
            console.log('did-commit-navigation');
        });

        document.querySelector('electrobun-webview').on('dom-ready', (e) => {
            console.log('dom-ready is fired', e.detail);
        });

        document.querySelector('electrobun-webview').on('new-window-open', (e) => {
            console.log('new-window-open is fired', e.detail);
        });

    </script>
</body>
</html>